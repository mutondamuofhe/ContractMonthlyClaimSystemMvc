@{
    var email = Context.Session.GetString("UserEmail") ?? "";
    var role = Context.Session.GetString("UserRole") ?? "";
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Contract Monthly Claim System - @ViewData["Title"]</title>
    <link rel="stylesheet" href="~/css/site.css" />
    <meta name="viewport" content="width=device-width" />
</head>
<body>
    <div class="container">
        <div style="display:flex;gap:16px">

            <!-- Side Navigation -->
            <div class="left-nav">
                <div style="font-weight:700;margin-bottom:12px">Menu</div>

                @* Manager menu *@
                @if (string.Equals(role, "Manager", System.StringComparison.OrdinalIgnoreCase))
                {
                    <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Manager" ? "active" : "")"
                       href="/Manager/Dashboard">Dashboard</a>

                    <a class="nav-link @(ViewContext.RouteData.Values["action"]?.ToString() == "Claims" ? "active" : "")"
                       href="/Manager/Claims">View Claims</a>
                }
                else
                {
                    @* Lecturer menu *@
                    <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Lecturer"
                                         && ViewContext.RouteData.Values["action"]?.ToString() == "Dashboard" ? "active" : "")"
                       href="/Lecturer/Dashboard">Dashboard</a>

                    <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Claims"
                                         && ViewContext.RouteData.Values["action"]?.ToString() == "Create" ? "active" : "")"
                       href="/Claims/Create">Submit Claim</a>

                    <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Claims"
                                         && ViewContext.RouteData.Values["action"]?.ToString() == "Track" ? "active" : "")"
                       href="/Claims/Track">View Claims</a>
                }

                <!-- User Info -->
                <div style="margin-top:10px;border-top:1px solid #feeafb;padding-top:10px">
                    <div class="small-muted">Signed in as</div>
                    <div style="font-weight:700">@email</div>
                    <div class="small-muted">@role</div>
                    <div style="margin-top:8px">
                        <a class="nav-link" href="/Account/Logout">Logout</a>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div style="flex:1">
                <div class="card">
                    @if (TempData["Error"] != null)
                    {
                        <div style="background:#ffecf2;padding:10px;border-radius:6px;color:#b0006f;margin-bottom:12px">
                            @TempData["Error"]
                        </div>
                    }
                    @if (TempData["Success"] != null)
                    {
                        <div style="background:#effaf6;padding:10px;border-radius:6px;color:#047857;margin-bottom:12px">
                            @TempData["Success"]
                        </div>
                    }

                    @RenderBody()
                </div>
            </div>

        </div>
    </div>
</body>
</html>
